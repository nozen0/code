<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="23714291-Nguyenhuuthinh-tuan7" content="Javascript_jQuery cơ bản">
    <title>Bai 3</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .header{
            height: 100px;
        }
        h1{
            text-align: center;
        }
        
    </style>
    
</head>
<body>
    <div class="container">
        <div class="row header">
            <div class="col-12">
                <h1 style="background-color: aliceblue; color: rebeccapurple;">Form Đăng Kí</h1>
            </div>
        </div>
        
        <div class="row menuBV">
            <div class="col-12">
                <nav class="navbar navbar-expand-sm">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a href="#" class="nav-link" style="text-decoration: none;">Trang chủ</a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">Giới thiệu</a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">Đăng nhập</a>
                        </li>
                        <li class="nav-item">
                            <button class="btn btn-success" data-toggle="modal" data-target="#modalID">Đăng ký</button>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                <h1 class="text-center">
                    Thông tin đăng ký
                </h1>
                <table class="table table-bordered" id="tableDS">
                    <tr>
                        <td>Họ và tên </td>
                        <td>Tên đăng nhập </td>
                        <td>Mật khẩu </td>
                        <td>Ngày sinh </td>
                        <td>Điện thoại </td>
                        <td>Địa chỉ </td>
                        <td>Email khác</td>
                        <td>Sở thích </td>
                    </tr>
                    <tr>
                        <td class="test">(1)</td>
                        <td class="test">(2)</td>
                        <td class="test">(3)</td>
                        <td class="test">(4)</td>
                        <td class="test">(5)</td>
                        <td class="test">(6)</td>
                        <td class="test">(7)</td>
                        <td class="test">(8)</td>
                </table>
            </div>
        </div>
    </div>
    <div class="modal fade" id="modalID">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Register Form</h3>
                    <button class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <form action="thongtin.htm" class="form" id="registerForm">
                        <table class="table table-bordered">
                            <tr>
                                <td>
                                    Họ và tên:
                                    <span id="errHoTen" class="err" style="color: red;">(*)</span>
                                </td>
                                <td>
                                    <input type="text" id="txtHoTen" class="form-control">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Tên Đăng Nhập: 
                                    <span id="errTenDangNhap" class="err" style="color: red;">(*)</span>
                                </td>
                                <td>
                                    <input type="text" id="txtTenDangNhap" class="form-control">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Mật Khẩu:
                                    <span id="errMatKhau" class="err" style="color: red;">(*)</span> 
                                </td>
                                <td>
                                    <input type="password" id="txtMatKhau" class="form-control">
                                </td>
                            </tr>
                            <tr>
                                <td>Ngày Sinh: </td>
                                <td>
                                    <input type="date" id="txtNgaySinh" class="form-control">
                                    <span id="errNgaySinh" class="err" style="color: red;"></span>
                                </td>
                            </tr>
                            <tr>
                                <td>Điện thoại:
                                    <span id="errDienThoai" class="err" style="color: red;"></span>
                                </td>
                                <td>
                                    <input type="text" id="txtDienThoai" class="form-control">
                                </td>
                            </tr>
                            <tr>
                                <td>Địa chỉ
                                    <span id="errDiaChi" class="err" style="color: red;"></span>
                                </td>
                                <td>
                                    <input type="text" id="txtDiaChi" class="form-control">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Email Khác: 
                                    <span id="errEmail" class="err" style="color: red;" ></span>
                                </td>
                                <td>
                                    <input type="text" id="txtEmail" class="form-control">
                                </td>
                            </tr>
                            <tr>
                                <td>Sở thích:</td>
                                <td>
                                    <input type="text" id="txtSoThich" class="form-control">
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>
                                    <input id="btnDangKy" type="button" value="Đăng ký" class="btn btn-info">
                                    <input id="btnHuy" type="button" value="Hủy" class="btn btn-info">
                                </td>
                            </tr>
                        </table>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function(){
            function ktHoTen(){
                let hoTen = $("#txtHoTen").val().trim();
                if(hoTen.length == 0){
                    $("#errHoTen").html("Họ tên không được rỗng");
                    $("#txtHoTen").focus();
                    return false;
                } else {
                    $("#errHoTen").html("");
                    return true;
                }
            }

            function ktTenDangNhap(){
                let tenDangNhap = $("#txtTenDangNhap").val().trim();
                if(tenDangNhap.length < 6){
                    $("#errTenDangNhap").html("Tên đăng nhập phải có ít nhất 6 ký tự");
                    $("#txtTenDangNhap").focus();
                    return false;
                } else {
                    $("#errTenDangNhap").html("");
                    return true;
                }
            }

            function ktMatKhau(){
                let matKhau = $("#txtMatKhau").val().trim();
                
                return true;
            }

            function ktNgaySinh(){
                let ngaySinh = $("#txtNgaySinh").val().trim();
                if(ngaySinh.length == 0){
                    $("#errNgaySinh").html("Ngày sinh không được rỗng");
                    $("#txtNgaySinh").focus();
                    return false;
                } else {
                    $("#errNgaySinh").html("");
                    return true;
                }
            }

            function ktDienThoai(){
                let dienThoai = $("#txtDienThoai").val().trim();
                if(isNaN(dienThoai)){
                    $("#errDienThoai").html("Điện thoại phải là số");
                    $("#txtDienThoai").focus();
                    return false;
                } else {
                    $("#errDienThoai").html("");
                    return true;
                }
            }

            function ktDiaChi(){
                let diaChi = $("#txtDiaChi").val().trim();
                return true;
            }

            function ktEmail(){
                let email = $("#txtEmail").val().trim();
                let regEmail = /^([a-zA-Z0-9._-]+)@([a-zA-Z0-9-]+\.)+([a-zA-Z]{2,})$/;
                if(!regEmail.test(email)){
                    $("#errEmail").html("Email không đúng định dạng");
                    $("#txtEmail").focus();
                    return false;
                } else {
                    $("#errEmail").html("");
                    return true;
                }
            }

            function ktSoThich(){
                let soThich = $("#txtSoThich").val().trim();
                if(soThich.length == 0){
                    $("#errSoThich").html("Sở thích không được rỗng");
                    $("#txtSoThich").focus();
                    return false;
                } else {
                    $("#errSoThich").html("");
                    return true;
                }
            }

            // xử lí khi nhấn đăng kí
            $("#btnDangKy").click(function(){
                let isValidHoTen = ktHoTen();
                let isValidTenDangNhap = ktTenDangNhap();
                let isValidMatKhau = ktMatKhau();
                let isValidNgaySinh = ktNgaySinh();
                let isValidDienThoai = ktDienThoai();
                let isValidDiaChi = ktDiaChi();
                let isValidEmail = ktEmail();
                let isValidSoThich = ktSoThich();

                if(isValidHoTen && isValidTenDangNhap && isValidMatKhau && isValidNgaySinh && isValidDienThoai && isValidDiaChi && isValidEmail && isValidSoThich){
                    $("#registerForm").submit();
                } else {
                    if(!isValidHoTen){
                        $("#txtHoTen").focus();
                    } else if(!isValidTenDangNhap){
                        $("#txtTenDangNhap").focus();
                    } else if(!isValidMatKhau){
                        $("#txtMatKhau").focus();
                    } else if(!isValidNgaySinh){
                        $("#txtNgaySinh").focus();
                    } else if(!isValidDienThoai){
                        $("#txtDienThoai").focus();
                    } else if(!isValidDiaChi){
                        $("#txtDiaChi").focus();
                    } else if(!isValidEmail){
                        $("#txtEmail").focus();
                    } else if(!isValidSoThich){
                        $("#txtSoThich").focus();
                    }
                }
            });

            $("#registerForm").submit(function(event){
                event.preventDefault();

                let hoTen = $("#txtHoTen").val().trim();
                let tenDangNhap = $("#txtTenDangNhap").val().trim();
                let matKhau = $("#txtMatKhau").val().trim();
                let ngaySinh = $("#txtNgaySinh").val().trim();
                let dienThoai = $("#txtDienThoai").val().trim();
                let diaChi = $("#txtDiaChi").val().trim();
                let email = $("#txtEmail").val().trim();
                let soThich = $("#txtSoThich").val().trim();

                $(".test").eq(0).text(hoTen);
                $(".test").eq(1).text(tenDangNhap);
                $(".test").eq(2).text(matKhau);
                $(".test").eq(3).text(ngaySinh);
                $(".test").eq(4).text(dienThoai);
                $(".test").eq(5).text(diaChi);
                $(".test").eq(6).text(email);
                $(".test").eq(7).text(soThich);


                alert("Đăng ký thành công!");

                $("#modalID").modal("hide");

                $("#txtHoTen").val("");
                $("#txtTenDangNhap").val("");
                $("#txtMatKhau").val("");
                $("#txtNgaySinh").val("");
                $("#txtDienThoai").val("");
                $("#txtDiaChi").val("");
                $("#txtEmail").val("");
                $("#txtSoThich").val("");
            });
        });
    </script>
</body>
</html>
